<table *ngIf="!addUser" mat-table [dataSource]="users" class="mat-elevation-z8">
  <ng-container matColumnDef="id">
    <th mat-header-cell *matHeaderCellDef> Id</th>
    <td mat-cell *matCellDef="let user">{{user.id}}</td>
  </ng-container>
  <ng-container matColumnDef="firstName">
    <th mat-header-cell *matHeaderCellDef> firstName</th>
    <td mat-cell *matCellDef="let user">{{user.firstName}}</td>
  </ng-container>
  <ng-container matColumnDef="lastName">
    <th mat-header-cell *matHeaderCellDef> Last Name</th>
    <td mat-cell *matCellDef="let user">{{user.lastName}}</td>
  </ng-container>
  <ng-container matColumnDef="email">
    <th mat-header-cell *matHeaderCellDef>e-Mail</th>
    <td mat-cell *matCellDef="let user">{{user.email}}</td>
  </ng-container>
  <ng-container matColumnDef="phone">
    <th mat-header-cell *matHeaderCellDef> phone</th>
    <td mat-cell *matCellDef="let user">{{user.phone}}</td>
  </ng-container>
  <ng-container matColumnDef="address">
    <th mat-header-cell *matHeaderCellDef> Address</th>
    <td mat-cell *matCellDef="let user">{{user.address}}</td>
  </ng-container>
  <ng-container matColumnDef="role">
    <th mat-header-cell *matHeaderCellDef> Role</th>
    <td mat-cell *matCellDef="let user">{{user.role?.name}}</td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>

<div class="formsDesign" fxLayout="row" fxLayoutAlign="space-around center">
  <form *ngIf="addUser" [formGroup]="userForm" (ngSubmit)="onSubmit()">
    <mat-card-title>Add an User</mat-card-title>
    <div fxLayout="row" fxLayoutAlign="space-between center">
      <mat-form-field class="form">
        <mat-label>First Name</mat-label>
        <input matInput id="firstName" type="text" formControlName="firstName">
      </mat-form-field>
      <mat-form-field class="form">
        <mat-label>Last Name</mat-label>
        <input matInput id="lastName" type="text" formControlName="lastName">
      </mat-form-field>
    </div>
    <mat-form-field class="form-full-width">
      <mat-label>e-Mail</mat-label>
      <input matInput id="email" type="text" formControlName="email">
    </mat-form-field>
    <div fxLayout="row" fxLayoutAlign="start center">
      <mat-form-field class="form">
        <mat-label>Phone</mat-label>
        <input matInput id="phone" type="text" formControlName="phone">
      </mat-form-field>
    </div>
    <mat-form-field class="form-full-width">
      <mat-label>Address</mat-label>
      <input matInput id="address" type="text" formControlName="address">
    </mat-form-field>
    <mat-form-field appearance="outline" class="form-full-width" formGroupName="role">
      <mat-label>choose a role</mat-label>
      <mat-select formControlName="id">
        <mat-option *ngFor="let role of roles" [value]="role.id">
          {{role.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <div fxLayout="row" fxLayoutAlign="end end">
      <button mat-button color="basic" type="reset" (click)="onCancel()">Cancel</button>
      <button mat-button color="primary" type="submit" [disabled]="userForm.invalid">Save</button>
    </div>
  </form>
</div>

<button mat-fab (click)="add()" *ngIf="!addUser">
  <mat-icon>add</mat-icon>
</button>
